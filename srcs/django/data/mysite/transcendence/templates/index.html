{% load static %}

<!DOCTYPE html>
<html lang="fr">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<title>Transcendance - Pong Game</title>
	<link rel="stylesheet" href="../static/css/style.css">
	<link href="https://fonts.googleapis.com/css2?family=Press+Start+2P&display=swap" rel="stylesheet">
</head>
<body class="hidden">

	<!-------------------------------------- PAGE TITLE --------------------------------------->
	<header>
		<h1>Transcendance</h1>
	</header>

	<div id="app">
	<!--------------------------------- PAGE SUBTITLE 'PONG' ---------------------------------->
		<h1 id="pongTitle">PONG</h1>

	<!--------------------------------------- REGISTER ---------------------------------------->
		<div id="registerScreen" class="screen">
			<h2>Register</h2>
			<form id="registerForm">
				{% csrf_token %}
				<input type="text" name="username" placeholder="Username" required>
				<input type="email" name="email" placeholder="Email" required>
				<input type="text" name="first_name" placeholder="First name" required>  
				<input type="password" name="password" placeholder="Password" required>
				<button type="submit" class="wideButton">Register</button>
				<button id="loginFromRegister" class="wideButton">Already have an account ? Login</button>
			</form>
			
		</div>

	<!---------------------------------------- LOGIN ------------------------------------------>
	
	<div id="loginScreen" class="screen">
		<h2>Login</h2>
		<form id="loginForm">
			{% csrf_token %}
			<input type="text" name="username" placeholder="Username">
			<input type="password" name="password" placeholder="Password">
			<button type="submit" class="wideButton">Login</button>
		</form>
		<button id="registerFromLogin" class="wideButton">Not an account yet ? Register</button>
		<button id="playAsGuest" class="wideButton">Play as guest</button>	
	</div>
	
	<!----------------------------------------- MENU ------------------------------------------>
		<div id="menuScreen" class="screen">
			<button id="profile" class="wideButton">Profile</button>
			<button id="playClassic" class="wideButton">Play Classic</button>
			<button id="playMultiplayer" class="wideButton">Play Multiplayer</button>
			<button id="playRemote" class="wideButton">Play Remote</button>
		</div>

	<!--------------------------------------- PROFILE ----------------------------------------->
		<div id="profileScreen" class="screen">
			<h2>User Profile</h2>
			{% if user.userprofile.profile_picture %}
				<img src="{{ user.userprofile.profile_picture.url }}" alt="Profile Picture" class="profile-picture">
			{% else %}
				<img src="{% static 'images/default_profile.png' %}" alt="Default Profile Picture" class="profile-picture">
			{% endif %}
			<p><strong>Username:</strong> <span id="profileUsername">{{ user.username }}</span></p>
			<p><strong>Email:</strong> <span id="profileEmail">{{ user.email }}</span></p>
			<p><strong>First Name:</strong> <span id="profileFirstName">{{ user.first_name }}</span></p>
			<p><strong>Wins:</strong> <span id="profileWins">{{ user.userprofile.victory_count }}</span></p>
			<p><strong>Losses:</strong> <span id="profileLosses">{{ user.userprofile.defeat_count }}</span></p>
			<button id="editProfile" class="wideButton">Edit profile</button>
			<button id="friendFromProfile" class="wideButton">Friend</button>
			<button id="menuFromProfile" class="wideButton">Back to menu</button>
			<button id="logoutButton">Se déconnecter</button>
		</div>

	<!----------------------------------------- 2FA ------------------------------------------->

		<div id="2faScreen" class="screen">
			<h2>Vérification 2FA</h2>
			<form id="2faForm" method="POST">
				<input type="text" id="twoFaCode" name="2fa_code" placeholder="Entrez le code 2FA reçu par SMS">
				<button type="submit">Valider</button>
			</form>
		</div>

	<!--------------------------------------- FRIEND ----------------------------------------->
		<div id="friendScreen" class="screen">
			<h2>Friend List</h2>
			<div id="friendsList"></div>
			<h3>Add a Friend</h3>
			<input type="text" id="friendUsername" placeholder="Username">
			<button id="addFriendButton" class="wideButton">Add Friend</button>
	
			<h3>Friend Requests</h3>
			<ul id="friendRequestsList">
				{% for friend_request in friend_requests %}
					<li>
						<span>{{ friend_request.from_user.username }}</span>
						<button class="acceptFriendButton" data-request-id="{{ friend_request.id }}">Accept</button>
					</li>
				{% empty %}
					<li>No friend requests</li>
				{% endfor %}
			</ul>
			<button id="profileFromFriend" class="wideButton">Cancel</button>
		</div>
	<!------------------------------------ EDIT PROFILE -------------------------------------->
	
		<div id="editProfileScreen" class="screen">
			<h2>Edit Profile</h2>
			<form id="editProfileForm" enctype="multipart/form-data">
				{% csrf_token %}
				<input type="text" id="editUsername" name="username" placeholder="Username" required>
				<input type="email" id="editEmail" name="email" placeholder="Email" required>
				<input type="text" id="editFirstName" name="first_name" placeholder="First name" required>
				<input type="password" id="editPassword" name="password" placeholder="Password">
				<input type="file" id="editProfilePicture" name="profile_picture">
				<button type="submit" class="wideButton">Save changes</button>
			</form>
			<button id="cancelEditProfile" class="wideButton">Cancel</button>
		</div>
	
	<!---------------------------------- SETTINGS ------------------------------------>
		<div id="settingsScreen" class="screen">

			<!-- Main Title -->
			<h2>Settings</h2>

			<!-- Players Names Input -->
			<div id="enterYourNames">
				<h3>Enter your names</h3>

				<!-- Player 1 -->
				<div id="player1LabelField" class="inputField">
					<label for="player1Input">Player 1:</label>
					<input type="text" id="player1Input" placeholder="Enter Player 1 name" maxlength="8">
				</div>
				<div>
					<p id="player1InputError" class="error-message"></p>
				</div>

				<!-- Player 2 -->
				<div id="player2LabelField" class="inputField">
					<label for="player2Input">Player 2:</label>
					<input type="text" id="player2Input" placeholder="Enter Player 2 name" maxlength="8">
				</div>
				<div>
					<p id="player2InputError" class="error-message"></p>
				</div>

				<!-- Player 3 -->
				<div id="player3LabelField" class="inputField">
					<label for="player3Input">Player 3:</label>
					<input type="text" id="player3Input" placeholder="Enter Player 3 name" maxlength="8">
				</div>
				<div>
					<p id="player3InputError" class="error-message"></p>
				</div>

				<!-- Player 4 -->
				<div id="player4LabelField" class="inputField">
					<label for="player4Input">Player 4:</label>
					<input type="text" id="player4Input" placeholder="Enter Player 4 name" maxlength="8">
				</div>
				<div>
					<p id="player4InputError" class="error-message"></p>
				</div>
			</div>

			<!-- Difficulty Selection -->
			<div id="difficultySelection">
				<h3>Choose difficulty</h3>
				<div id="difficultyButtons">
					<button id="easyButton" class="difficultyButton selected">Easy</button>
					<button id="mediumButton" class="difficultyButton">Medium</button>
					<button id="hardButton" class="difficultyButton">Hard</button>
				</div>
			</div>

			<!-- Start Game Button -->
			<button id="startGameWithParameters" class="wideButton">Start Game</button>
			<button id="backFromSettings" class="backButton">Back</button>
		</div>

	<!---------------------------------- CLASSIC PONG GAME ------------------------------------>
	<!-- Mode Selection Screen -->
		<div id="modeSelectionScreen" class="screen">
			<h2>Select Game Mode</h2>
			<button id="modeVsAI" class="wideButton">1 Player</button>
			<button id="mode2Players" class="wideButton">2 Players</button>
			<button id="backFromClassicModeSelection" class="backButton">Back</button>
		</div>

	<!-- Game Screen -->
		<div id="gameScreen" class="screen">
			<!-- Live chat -->
			<div id="liveChat">
				<div id="messages"></div>
				<form id="chatInput">
					<input type="text" name="message" id="messageInput"/>
					<button type="submit" id="sendButton">Send</button>
				</form>
			</div>

			<!-- Top Section -->
			<div id="topSection" class="game-section">
				<!-- Player 3 name and controls -->
				<div class="top-controls-row">
					<span id="player3Label" class="playerLabel">Player 3</span>
					<span class="controlsTextTopBot">(Controls:</span>
					<span class="key">J</span>
					<span class="key">L</span>
					<span class="controlsTextTopBot">)</span>
				</div>
				<!-- Player 3 Score -->
				<div class="top-score-row">
					<span id="player3Score" class="playerScore">0</span>
				</div>
			</div>
		
			<!-- Middle Section -->
			<div id="middleSection" class="game-section">
				<!-- Left Controls Section -->
				<div id="leftControlsSection" class="game-subsection">
					<!-- Player 1 -->
					<div class="playerInfo">
						<span id="player1Label" class="playerLabel">Player 1</span>
					</div>
					<!-- Player 1 Controls -->
					<div id="leftControls" class="controlKeys">
						<span class="controlsTextLeftRight">Controls</span>
						<p>W</p>
						<p>S</p>
					</div>
				</div>
		
				<!-- Left Score Section -->
				<div id="leftScoreSection" class="score-section">
					<span id="player1Score" class="playerScore">0</span>
				</div>
		
				<!-- Center Section -->
				<div id="centerSection" class="game-subsection">
					<!-- Game canvas -->
					<div id="gameWrapper">
						<canvas id="gameCanvas" width="1000" height="500"></canvas>
					</div>
				</div>
		
				<!-- Right Score Section -->
				<div id="rightScoreSection" class="score-section">
					<span id="player2Score" class="playerScore">0</span>
				</div>
		
				<!-- Right Controls Section -->
				<div id="rightControlsSection" class="game-subsection">
					<!-- Player 2 -->
					<div class="playerInfo">
						<span id="player2Label" class="playerLabel">Player 2</span>
					</div>
					<!-- Player 2 Controls -->
					<div id="rightControls" class="controlKeys">
						<span class="controlsTextLeftRight">Controls</span>
						<p>&uarr;</p>
						<p>&darr;</p>
					</div>
				</div>
			</div>
		
			<!-- Bottom Section -->
			<div id="bottomSection" class="game-section">
				<!-- Player 4 Score -->
				<div class="bottom-score-row">
					<span id="player4Score" class="playerScore">0</span>
				</div>
				<!-- Player 4 Name and controls -->
				<div class="bottom-controls-row">
					<span id="player4Label" class="playerLabel">Player 4</span>
					<span class="controlsTextTopBot">(Controls:</span>
					<span class="key">1</span>
					<span class="key">3</span>
					<span class="controlsTextTopBot">)</span>
				</div>
			</div>

		</div>

	<!-- End Screen -->
		<div id="classicEndScreen" class="screen">
			<h2 id="classicWinMessage">Player Wins!</h2>
			<button id="restartClassicGame" class="wideButton">Restart</button>
			<button id="menuFromClassicEnd" class="wideButton">Back to Menu</button>
		</div>

	<!-------------------------------- MULTIPLAYER PONG GAME ---------------------------------->
	<!-- Mode Selection Screen -->
		<div id="multiModeSelectionScreen" class="screen">
			<h2>Select Game Mode</h2>
			<button id="onePlayerMode" class="wideButton">1 Player</button>
			<button id="twoPlayersMode" class="wideButton">2 Players</button>
			<button id="threePlayersMode" class="wideButton">3 Players</button>
			<button id="fourPlayersMode" class="wideButton">4 Players</button>
			<button id="backFromMultiModeSelection" class="backButton">Back</button>
		</div>

	</div>

	<!---------------------------------- JAVASCRIPT SCRIPTS ----------------------------------->
	{% load static %}
	<!-- Session -->
	<script src="{% static 'js/Session/register.js' %}"></script>
	<script src="{% static 'js/Session/login.js' %}"></script>
	<script src="{% static 'js/Session/profile.js' %}"></script>
	<script src="{% static 'js/Session/editProfile.js' %}"></script>
	<script src="{% static 'js/Session/friends.js' %}"></script>
	<script src="{% static 'js/Session/updateScore.js' %}"></script>
	<script src="{% static 'js/Session/2fa.js' %}"></script>

	<!-- Screens -->
	<script src="{% static 'js/Screens/menu.js' %}"></script>
	<script src="{% static 'js/Screens/classicModeSelection.js' %}"></script>
	<script src="{% static 'js/Screens/multiModeSelection.js' %}"></script>
	<script src="{% static 'js/Screens/settings.js' %}"></script>
	<script src="{% static 'js/Screens/endScreen.js' %}"></script>

	<!-- Game -->
	<script src="{% static 'js/Game/loop.js' %}"></script>
	<script src="{% static 'js/Game/events.js' %}"></script>
	<script src="{% static 'js/Game/countdown.js' %}"></script>
	<script src="{% static 'js/Game/paddles.js' %}"></script>
	<script src="{% static 'js/Game/ball.js' %}"></script>
	<script src="{% static 'js/Game/collisions.js' %}"></script>
	<script src="{% static 'js/Game/reset.js' %}"></script>
	<script src="{% static 'js/Game/scores.js' %}"></script>
	<script src="{% static 'js/Game/ai.js' %}"></script>

	<!-- Live -->
	<script src="{% static 'js/Live/liveChat.js' %}"></script>

	<script src="{% static 'js/main.js' %}"></script>

</body>
</html>